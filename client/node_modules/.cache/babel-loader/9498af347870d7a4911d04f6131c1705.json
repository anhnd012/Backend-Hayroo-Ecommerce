{"ast":null,"code":"import _objectSpread from\"D:\\\\API\\\\Backend-Hayroo-Ecommerce\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:\\\\API\\\\Backend-Hayroo-Ecommerce\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{Fragment,useEffect,useContext,useState}from\"react\";import{useHistory}from\"react-router-dom\";import{LayoutContext}from\"../layout\";import{subTotal,quantity,totalCost}from\"../partials/Mixins\";import{cartListProduct}from\"../partials/FetchApi\";import{getBrainTreeToken,getPaymentProcess}from\"./FetchApi\";import{fetchData,fetchbrainTree,pay}from\"./Action\";import DropIn from\"braintree-web-drop-in-react\";var apiURL=process.env.REACT_APP_API_URL;export var CheckoutComponent=function CheckoutComponent(props){var history=useHistory();var _useContext=useContext(LayoutContext),data=_useContext.data,dispatch=_useContext.dispatch;var _useState=useState({address:\"\",phone:\"\",error:false,success:false,clientToken:null,instance:{}}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];useEffect(function(){fetchData(cartListProduct,dispatch);fetchbrainTree(getBrainTreeToken,setState);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);if(data.loading){return/*#__PURE__*/React.createElement(\"div\",{className:\"flex items-center justify-center h-screen\"},/*#__PURE__*/React.createElement(\"svg\",{className:\"w-12 h-12 animate-spin text-gray-600\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"})),\"Please wait untill finish\");}return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"section\",{className:\"mx-4 mt-20 md:mx-12 md:mt-32 lg:mt-24\"},/*#__PURE__*/React.createElement(\"div\",{className:\"text-2xl mx-2\"},\"Order\"),/*#__PURE__*/React.createElement(\"div\",{className:\"flex flex-col md:flex md:space-x-2 md:flex-row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"md:w-1/2\"},/*#__PURE__*/React.createElement(CheckoutProducts,{products:data.cartProduct})),/*#__PURE__*/React.createElement(\"div\",{className:\"w-full order-first md:order-last md:w-1/2\"},state.clientToken!==null?/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"div\",{onBlur:function onBlur(e){return setState(_objectSpread(_objectSpread({},state),{},{error:false}));},className:\"p-4 md:p-8\"},state.error?/*#__PURE__*/React.createElement(\"div\",{className:\"bg-red-200 py-2 px-4 rounded\"},state.error):\"\",/*#__PURE__*/React.createElement(\"div\",{className:\"flex flex-col py-2\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"address\",className:\"pb-2\"},\"Dalivery Address\"),/*#__PURE__*/React.createElement(\"input\",{value:state.address,onChange:function onChange(e){return setState(_objectSpread(_objectSpread({},state),{},{address:e.target.value,error:false}));},type:\"text\",id:\"address\",className:\"border px-4 py-2\",placeholder:\"Address...\"})),/*#__PURE__*/React.createElement(\"div\",{className:\"flex flex-col py-2 mb-2\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"phone\",className:\"pb-2\"},\"Phone\"),/*#__PURE__*/React.createElement(\"input\",{value:state.phone,onChange:function onChange(e){return setState(_objectSpread(_objectSpread({},state),{},{phone:e.target.value,error:false}));},type:\"number\",id:\"phone\",className:\"border px-4 py-2\",placeholder:\"+880\"})),/*#__PURE__*/React.createElement(DropIn,{options:{authorization:state.clientToken,paypal:{flow:\"vault\"}},onInstance:function onInstance(instance){return state.instance=instance;}}),/*#__PURE__*/React.createElement(\"div\",{onClick:function onClick(e){return pay(data,dispatch,state,setState,getPaymentProcess,totalCost,history);},className:\"w-full px-4 py-2 text-center text-white font-semibold cursor-pointer\",style:{background:\"#303031\"}},\"Pay now\"))):/*#__PURE__*/React.createElement(\"div\",{className:\"flex items-center justify-center py-12\"},/*#__PURE__*/React.createElement(\"svg\",{className:\"w-12 h-12 animate-spin text-gray-600\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\"},/*#__PURE__*/React.createElement(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:\"2\",d:\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"})))))));};var CheckoutProducts=function CheckoutProducts(_ref){var products=_ref.products;var history=useHistory();return/*#__PURE__*/React.createElement(Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"grid grid-cols-2 md:grid-cols-1\"},products!==null&&products.length>0?products.map(function(product,index){return/*#__PURE__*/React.createElement(\"div\",{key:index,className:\"col-span-1 m-2 md:py-6 md:border-t md:border-b md:my-2 md:mx-0 md:flex md:items-center md:justify-between\"},/*#__PURE__*/React.createElement(\"div\",{className:\"md:flex md:items-center md:space-x-4\"},/*#__PURE__*/React.createElement(\"img\",{onClick:function onClick(e){return history.push(\"/products/\".concat(product._id));},className:\"cursor-pointer md:h-20 md:w-20 object-cover object-center\",src:\"\".concat(apiURL,\"/uploads/products/\").concat(product.pImages[0]),alt:\"wishListproduct\"}),/*#__PURE__*/React.createElement(\"div\",{className:\"text-lg md:ml-6 truncate\"},product.pName),/*#__PURE__*/React.createElement(\"div\",{className:\"md:ml-6 font-semibold text-gray-600 text-sm\"},\"Price : $\",product.pPrice,\".00\",\" \"),/*#__PURE__*/React.createElement(\"div\",{className:\"md:ml-6 font-semibold text-gray-600 text-sm\"},\"Quantitiy : \",quantity(product._id)),/*#__PURE__*/React.createElement(\"div\",{className:\"font-semibold text-gray-600 text-sm\"},\"Subtotal : $\",subTotal(product._id,product.pPrice),\".00\")));}):/*#__PURE__*/React.createElement(\"div\",null,\"No product found for checkout\")));};export default CheckoutProducts;","map":{"version":3,"names":["React","Fragment","useEffect","useContext","useState","useHistory","LayoutContext","subTotal","quantity","totalCost","cartListProduct","getBrainTreeToken","getPaymentProcess","fetchData","fetchbrainTree","pay","DropIn","apiURL","process","env","REACT_APP_API_URL","CheckoutComponent","props","history","data","dispatch","address","phone","error","success","clientToken","instance","state","setState","loading","cartProduct","e","target","value","authorization","paypal","flow","background","CheckoutProducts","products","length","map","product","index","push","_id","pImages","pName","pPrice"],"sources":["D:/API/Backend-Hayroo-Ecommerce/client/src/components/shop/order/CheckoutProducts.js"],"sourcesContent":["import React, { Fragment, useEffect, useContext, useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { LayoutContext } from \"../layout\";\nimport { subTotal, quantity, totalCost } from \"../partials/Mixins\";\n\nimport { cartListProduct } from \"../partials/FetchApi\";\nimport { getBrainTreeToken, getPaymentProcess } from \"./FetchApi\";\nimport { fetchData, fetchbrainTree, pay } from \"./Action\";\n\nimport DropIn from \"braintree-web-drop-in-react\";\n\nconst apiURL = process.env.REACT_APP_API_URL;\n\nexport const CheckoutComponent = (props) => {\n  const history = useHistory();\n  const { data, dispatch } = useContext(LayoutContext);\n\n  const [state, setState] = useState({\n    address: \"\",\n    phone: \"\",\n    error: false,\n    success: false,\n    clientToken: null,\n    instance: {},\n  });\n\n  useEffect(() => {\n    fetchData(cartListProduct, dispatch);\n    fetchbrainTree(getBrainTreeToken, setState);\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  if (data.loading) {\n    return (\n      <div className=\"flex items-center justify-center h-screen\">\n        <svg\n          className=\"w-12 h-12 animate-spin text-gray-600\"\n          fill=\"none\"\n          stroke=\"currentColor\"\n          viewBox=\"0 0 24 24\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <path\n            strokeLinecap=\"round\"\n            strokeLinejoin=\"round\"\n            strokeWidth=\"2\"\n            d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"\n          ></path>\n        </svg>\n        Please wait untill finish\n      </div>\n    );\n  }\n  return (\n    <Fragment>\n      <section className=\"mx-4 mt-20 md:mx-12 md:mt-32 lg:mt-24\">\n        <div className=\"text-2xl mx-2\">Order</div>\n        {/* Product List */}\n        <div className=\"flex flex-col md:flex md:space-x-2 md:flex-row\">\n          <div className=\"md:w-1/2\">\n            <CheckoutProducts products={data.cartProduct} />\n          </div>\n          <div className=\"w-full order-first md:order-last md:w-1/2\">\n            {state.clientToken !== null ? (\n              <Fragment>\n                <div\n                  onBlur={(e) => setState({ ...state, error: false })}\n                  className=\"p-4 md:p-8\"\n                >\n                  {state.error ? (\n                    <div className=\"bg-red-200 py-2 px-4 rounded\">\n                      {state.error}\n                    </div>\n                  ) : (\n                    \"\"\n                  )}\n                  <div className=\"flex flex-col py-2\">\n                    <label htmlFor=\"address\" className=\"pb-2\">\n                      Dalivery Address\n                    </label>\n                    <input\n                      value={state.address}\n                      onChange={(e) =>\n                        setState({\n                          ...state,\n                          address: e.target.value,\n                          error: false,\n                        })\n                      }\n                      type=\"text\"\n                      id=\"address\"\n                      className=\"border px-4 py-2\"\n                      placeholder=\"Address...\"\n                    />\n                  </div>\n                  <div className=\"flex flex-col py-2 mb-2\">\n                    <label htmlFor=\"phone\" className=\"pb-2\">\n                      Phone\n                    </label>\n                    <input\n                      value={state.phone}\n                      onChange={(e) =>\n                        setState({\n                          ...state,\n                          phone: e.target.value,\n                          error: false,\n                        })\n                      }\n                      type=\"number\"\n                      id=\"phone\"\n                      className=\"border px-4 py-2\"\n                      placeholder=\"+880\"\n                    />\n                  </div>\n                  <DropIn\n                    options={{\n                      authorization: state.clientToken,\n                      paypal: {\n                        flow: \"vault\",\n                      },\n                    }}\n                    onInstance={(instance) => (state.instance = instance)}\n                  />\n                  <div\n                    onClick={(e) =>\n                      pay(\n                        data,\n                        dispatch,\n                        state,\n                        setState,\n                        getPaymentProcess,\n                        totalCost,\n                        history\n                      )\n                    }\n                    className=\"w-full px-4 py-2 text-center text-white font-semibold cursor-pointer\"\n                    style={{ background: \"#303031\" }}\n                  >\n                    Pay now\n                  </div>\n                </div>\n              </Fragment>\n            ) : (\n              <div className=\"flex items-center justify-center py-12\">\n                <svg\n                  className=\"w-12 h-12 animate-spin text-gray-600\"\n                  fill=\"none\"\n                  stroke=\"currentColor\"\n                  viewBox=\"0 0 24 24\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    strokeWidth=\"2\"\n                    d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"\n                  ></path>\n                </svg>\n              </div>\n            )}\n          </div>\n        </div>\n      </section>\n    </Fragment>\n  );\n};\n\nconst CheckoutProducts = ({ products }) => {\n  const history = useHistory();\n\n  return (\n    <Fragment>\n      <div className=\"grid grid-cols-2 md:grid-cols-1\">\n        {products !== null && products.length > 0 ? (\n          products.map((product, index) => {\n            return (\n              <div\n                key={index}\n                className=\"col-span-1 m-2 md:py-6 md:border-t md:border-b md:my-2 md:mx-0 md:flex md:items-center md:justify-between\"\n              >\n                <div className=\"md:flex md:items-center md:space-x-4\">\n                  <img\n                    onClick={(e) => history.push(`/products/${product._id}`)}\n                    className=\"cursor-pointer md:h-20 md:w-20 object-cover object-center\"\n                    src={`${apiURL}/uploads/products/${product.pImages[0]}`}\n                    alt=\"wishListproduct\"\n                  />\n                  <div className=\"text-lg md:ml-6 truncate\">\n                    {product.pName}\n                  </div>\n                  <div className=\"md:ml-6 font-semibold text-gray-600 text-sm\">\n                    Price : ${product.pPrice}.00{\" \"}\n                  </div>\n                  <div className=\"md:ml-6 font-semibold text-gray-600 text-sm\">\n                    Quantitiy : {quantity(product._id)}\n                  </div>\n                  <div className=\"font-semibold text-gray-600 text-sm\">\n                    Subtotal : ${subTotal(product._id, product.pPrice)}.00\n                  </div>\n                </div>\n              </div>\n            );\n          })\n        ) : (\n          <div>No product found for checkout</div>\n        )}\n      </div>\n    </Fragment>\n  );\n};\n\nexport default CheckoutProducts;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}